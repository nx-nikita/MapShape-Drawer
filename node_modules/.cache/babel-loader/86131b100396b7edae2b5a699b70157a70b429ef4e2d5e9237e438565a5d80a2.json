{"ast":null,"code":"import * as turf from \"@turf/turf\";\nexport const applyPolygonRules = (newFeature, existing) => {\n  for (const old of existing) {\n    if (!old.geometry) continue;\n    if (turf.booleanContains(newFeature, old) || turf.booleanContains(old, newFeature)) {\n      return null;\n    }\n    if (turf.booleanIntersects(newFeature, old)) {\n      return null;\n    }\n  }\n  return newFeature;\n};\nexport const hasOverlap = (newFeature, features) => {\n  for (const f of features) {\n    if (f.geometry.type !== \"LineString\" && newFeature.geometry.type !== \"LineString\") {\n      if (turf.booleanIntersects(newFeature, f)) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\nexport const trimPolygon = (newPoly, existingPoly) => {\n  try {\n    const trimmed = turf.difference(newPoly, existingPoly);\n\n    // ❌ agar pura polygon cut ho gaya\n    if (!trimmed) return null;\n    return trimmed;\n  } catch (err) {\n    console.warn(\"Auto-trim failed:\", err);\n    return null;\n  }\n};","map":{"version":3,"names":["turf","applyPolygonRules","newFeature","existing","old","geometry","booleanContains","booleanIntersects","hasOverlap","features","f","type","trimPolygon","newPoly","existingPoly","trimmed","difference","err","console","warn"],"sources":["C:/Users/HP/map-drawing-app/-Shapes-Drawer/src/utils/geometry.ts"],"sourcesContent":["import * as turf from \"@turf/turf\";\r\nimport { Feature, Geometry } from \"geojson\";\r\n\r\nexport const applyPolygonRules = (\r\n  newFeature: Feature<Geometry>,\r\n  existing: Feature<Geometry>[]\r\n): Feature<Geometry> | null => {\r\n  for (const old of existing) {\r\n    if (!old.geometry) continue;\r\n\r\n    if (\r\n      turf.booleanContains(newFeature, old) ||\r\n      turf.booleanContains(old, newFeature)\r\n    ) {\r\n      return null;\r\n    }\r\n\r\n    if (turf.booleanIntersects(newFeature, old)) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  return newFeature;\r\n};\r\n\r\nexport const hasOverlap = (\r\n  newFeature: Feature<Geometry>,\r\n  features: Feature<Geometry>[]\r\n): boolean => {\r\n  for (const f of features) {\r\n    if (\r\n      f.geometry.type !== \"LineString\" &&\r\n      newFeature.geometry.type !== \"LineString\"\r\n    ) {\r\n      if (turf.booleanIntersects(newFeature, f)) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\nexport const trimPolygon = (\r\n  newPoly: Feature<Geometry>,\r\n  existingPoly: Feature<Geometry>\r\n): Feature<Geometry> | null => {\r\n  try {\r\n    const trimmed = turf.difference(\r\n      newPoly as any,\r\n      existingPoly as any\r\n    );\r\n\r\n    // ❌ agar pura polygon cut ho gaya\r\n    if (!trimmed) return null;\r\n\r\n    return trimmed as Feature<Geometry>;\r\n  } catch (err) {\r\n    console.warn(\"Auto-trim failed:\", err);\r\n    return null;\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAO,KAAKA,IAAI,MAAM,YAAY;AAGlC,OAAO,MAAMC,iBAAiB,GAAGA,CAC/BC,UAA6B,EAC7BC,QAA6B,KACA;EAC7B,KAAK,MAAMC,GAAG,IAAID,QAAQ,EAAE;IAC1B,IAAI,CAACC,GAAG,CAACC,QAAQ,EAAE;IAEnB,IACEL,IAAI,CAACM,eAAe,CAACJ,UAAU,EAAEE,GAAG,CAAC,IACrCJ,IAAI,CAACM,eAAe,CAACF,GAAG,EAAEF,UAAU,CAAC,EACrC;MACA,OAAO,IAAI;IACb;IAEA,IAAIF,IAAI,CAACO,iBAAiB,CAACL,UAAU,EAAEE,GAAG,CAAC,EAAE;MAC3C,OAAO,IAAI;IACb;EACF;EAEA,OAAOF,UAAU;AACnB,CAAC;AAED,OAAO,MAAMM,UAAU,GAAGA,CACxBN,UAA6B,EAC7BO,QAA6B,KACjB;EACZ,KAAK,MAAMC,CAAC,IAAID,QAAQ,EAAE;IACxB,IACEC,CAAC,CAACL,QAAQ,CAACM,IAAI,KAAK,YAAY,IAChCT,UAAU,CAACG,QAAQ,CAACM,IAAI,KAAK,YAAY,EACzC;MACA,IAAIX,IAAI,CAACO,iBAAiB,CAACL,UAAU,EAAEQ,CAAC,CAAC,EAAE;QACzC,OAAO,IAAI;MACb;IACF;EACF;EAEA,OAAO,KAAK;AACd,CAAC;AACD,OAAO,MAAME,WAAW,GAAGA,CACzBC,OAA0B,EAC1BC,YAA+B,KACF;EAC7B,IAAI;IACF,MAAMC,OAAO,GAAGf,IAAI,CAACgB,UAAU,CAC7BH,OAAO,EACPC,YACF,CAAC;;IAED;IACA,IAAI,CAACC,OAAO,EAAE,OAAO,IAAI;IAEzB,OAAOA,OAAO;EAChB,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZC,OAAO,CAACC,IAAI,CAAC,mBAAmB,EAAEF,GAAG,CAAC;IACtC,OAAO,IAAI;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}