{"ast":null,"code":"import { RedBlackNode } from \"./RedBlackTree\";\nimport { circles, epsilon2 } from \"./Diagram\";\nvar circlePool = [];\nexport var firstCircle;\nfunction Circle() {\n  RedBlackNode(this);\n  this.x = this.y = this.arc = this.site = this.cy = null;\n}\nexport function attachCircle(arc) {\n  var lArc = arc.P,\n    rArc = arc.N;\n  if (!lArc || !rArc) return;\n  var lSite = lArc.site,\n    cSite = arc.site,\n    rSite = rArc.site;\n  if (lSite === rSite) return;\n  var bx = cSite[0],\n    by = cSite[1],\n    ax = lSite[0] - bx,\n    ay = lSite[1] - by,\n    cx = rSite[0] - bx,\n    cy = rSite[1] - by;\n  var d = 2 * (ax * cy - ay * cx);\n  if (d >= -epsilon2) return;\n  var ha = ax * ax + ay * ay,\n    hc = cx * cx + cy * cy,\n    x = (cy * ha - ay * hc) / d,\n    y = (ax * hc - cx * ha) / d;\n  var circle = circlePool.pop() || new Circle();\n  circle.arc = arc;\n  circle.site = cSite;\n  circle.x = x + bx;\n  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom\n\n  arc.circle = circle;\n  var before = null,\n    node = circles._;\n  while (node) {\n    if (circle.y < node.y || circle.y === node.y && circle.x <= node.x) {\n      if (node.L) node = node.L;else {\n        before = node.P;\n        break;\n      }\n    } else {\n      if (node.R) node = node.R;else {\n        before = node;\n        break;\n      }\n    }\n  }\n  circles.insert(before, circle);\n  if (!before) firstCircle = circle;\n}\nexport function detachCircle(arc) {\n  var circle = arc.circle;\n  if (circle) {\n    if (!circle.P) firstCircle = circle.N;\n    circles.remove(circle);\n    circlePool.push(circle);\n    RedBlackNode(circle);\n    arc.circle = null;\n  }\n}","map":{"version":3,"names":["RedBlackNode","circles","epsilon2","circlePool","firstCircle","Circle","x","y","arc","site","cy","attachCircle","lArc","P","rArc","N","lSite","cSite","rSite","bx","by","ax","ay","cx","d","ha","hc","circle","pop","Math","sqrt","before","node","_","L","R","insert","detachCircle","remove","push"],"sources":["C:/Users/HP/map-drawing-app/-Shapes-Drawer/node_modules/d3-voronoi/src/Circle.js"],"sourcesContent":["import {RedBlackNode} from \"./RedBlackTree\";\r\nimport {circles, epsilon2} from \"./Diagram\";\r\n\r\nvar circlePool = [];\r\n\r\nexport var firstCircle;\r\n\r\nfunction Circle() {\r\n  RedBlackNode(this);\r\n  this.x =\r\n  this.y =\r\n  this.arc =\r\n  this.site =\r\n  this.cy = null;\r\n}\r\n\r\nexport function attachCircle(arc) {\r\n  var lArc = arc.P,\r\n      rArc = arc.N;\r\n\r\n  if (!lArc || !rArc) return;\r\n\r\n  var lSite = lArc.site,\r\n      cSite = arc.site,\r\n      rSite = rArc.site;\r\n\r\n  if (lSite === rSite) return;\r\n\r\n  var bx = cSite[0],\r\n      by = cSite[1],\r\n      ax = lSite[0] - bx,\r\n      ay = lSite[1] - by,\r\n      cx = rSite[0] - bx,\r\n      cy = rSite[1] - by;\r\n\r\n  var d = 2 * (ax * cy - ay * cx);\r\n  if (d >= -epsilon2) return;\r\n\r\n  var ha = ax * ax + ay * ay,\r\n      hc = cx * cx + cy * cy,\r\n      x = (cy * ha - ay * hc) / d,\r\n      y = (ax * hc - cx * ha) / d;\r\n\r\n  var circle = circlePool.pop() || new Circle;\r\n  circle.arc = arc;\r\n  circle.site = cSite;\r\n  circle.x = x + bx;\r\n  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom\r\n\r\n  arc.circle = circle;\r\n\r\n  var before = null,\r\n      node = circles._;\r\n\r\n  while (node) {\r\n    if (circle.y < node.y || (circle.y === node.y && circle.x <= node.x)) {\r\n      if (node.L) node = node.L;\r\n      else { before = node.P; break; }\r\n    } else {\r\n      if (node.R) node = node.R;\r\n      else { before = node; break; }\r\n    }\r\n  }\r\n\r\n  circles.insert(before, circle);\r\n  if (!before) firstCircle = circle;\r\n}\r\n\r\nexport function detachCircle(arc) {\r\n  var circle = arc.circle;\r\n  if (circle) {\r\n    if (!circle.P) firstCircle = circle.N;\r\n    circles.remove(circle);\r\n    circlePool.push(circle);\r\n    RedBlackNode(circle);\r\n    arc.circle = null;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}