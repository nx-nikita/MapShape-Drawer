{"ast":null,"code":"import * as turf from \"@turf/turf\";\n/**\r\n * üî• AUTO-TRIM LOGIC\r\n * - Partial overlap ‚Üí trim\r\n * - Full overlap ‚Üí reject\r\n */\nexport const applyPolygonRules = (newFeature, existing) => {\n  let finalPolygon = newFeature;\n  for (const old of existing) {\n    if (old.geometry.type === \"LineString\" || finalPolygon.geometry.type === \"LineString\") {\n      continue;\n    }\n\n    // ‚ùå Fully contained ‚Üí reject\n    if (turf.booleanContains(old, finalPolygon) || turf.booleanContains(finalPolygon, old)) {\n      return null;\n    }\n\n    // ‚úÇÔ∏è Partial overlap ‚Üí TRIM\n    if (turf.booleanIntersects(finalPolygon, old)) {\n      const trimmed = turf.difference(finalPolygon, old);\n\n      // ‚ùå Nothing left after trimming\n      if (!trimmed) return null;\n      finalPolygon = trimmed;\n    }\n  }\n  return finalPolygon;\n};","map":{"version":3,"names":["turf","applyPolygonRules","newFeature","existing","finalPolygon","old","geometry","type","booleanContains","booleanIntersects","trimmed","difference"],"sources":["C:/Users/HP/map-drawing-app/-Shapes-Drawer/src/utils/geometry.ts"],"sourcesContent":["import * as turf from \"@turf/turf\";\r\nimport { Feature, Geometry } from \"geojson\";\r\n\r\n/**\r\n * üî• AUTO-TRIM LOGIC\r\n * - Partial overlap ‚Üí trim\r\n * - Full overlap ‚Üí reject\r\n */\r\nexport const applyPolygonRules = (\r\n  newFeature: Feature<Geometry>,\r\n  existing: Feature<Geometry>[]\r\n): Feature<Geometry> | null => {\r\n  let finalPolygon: any = newFeature;\r\n\r\n  for (const old of existing) {\r\n    if (\r\n      old.geometry.type === \"LineString\" ||\r\n      finalPolygon.geometry.type === \"LineString\"\r\n    ) {\r\n      continue;\r\n    }\r\n\r\n    // ‚ùå Fully contained ‚Üí reject\r\n    if (\r\n      turf.booleanContains(old, finalPolygon) ||\r\n      turf.booleanContains(finalPolygon, old)\r\n    ) {\r\n      return null;\r\n    }\r\n\r\n    // ‚úÇÔ∏è Partial overlap ‚Üí TRIM\r\n    if (turf.booleanIntersects(finalPolygon, old)) {\r\n      const trimmed = turf.difference(finalPolygon, old);\r\n\r\n      // ‚ùå Nothing left after trimming\r\n      if (!trimmed) return null;\r\n\r\n      finalPolygon = trimmed as Feature<Geometry>;\r\n    }\r\n  }\r\n\r\n  return finalPolygon;\r\n};\r\n"],"mappings":"AAAA,OAAO,KAAKA,IAAI,MAAM,YAAY;AAGlC;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,iBAAiB,GAAGA,CAC/BC,UAA6B,EAC7BC,QAA6B,KACA;EAC7B,IAAIC,YAAiB,GAAGF,UAAU;EAElC,KAAK,MAAMG,GAAG,IAAIF,QAAQ,EAAE;IAC1B,IACEE,GAAG,CAACC,QAAQ,CAACC,IAAI,KAAK,YAAY,IAClCH,YAAY,CAACE,QAAQ,CAACC,IAAI,KAAK,YAAY,EAC3C;MACA;IACF;;IAEA;IACA,IACEP,IAAI,CAACQ,eAAe,CAACH,GAAG,EAAED,YAAY,CAAC,IACvCJ,IAAI,CAACQ,eAAe,CAACJ,YAAY,EAAEC,GAAG,CAAC,EACvC;MACA,OAAO,IAAI;IACb;;IAEA;IACA,IAAIL,IAAI,CAACS,iBAAiB,CAACL,YAAY,EAAEC,GAAG,CAAC,EAAE;MAC7C,MAAMK,OAAO,GAAGV,IAAI,CAACW,UAAU,CAACP,YAAY,EAAEC,GAAG,CAAC;;MAElD;MACA,IAAI,CAACK,OAAO,EAAE,OAAO,IAAI;MAEzBN,YAAY,GAAGM,OAA4B;IAC7C;EACF;EAEA,OAAON,YAAY;AACrB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}